diff -Naurp squashfs.orig/linux-2.6/inode.c squashfs/linux-2.6/inode.c
--- squashfs.orig/linux-2.6/inode.c	2008-03-21 19:52:47.000000000 +0000
+++ squashfs/linux-2.6/inode.c	2008-03-21 19:56:31.000000000 +0000
@@ -27,6 +27,7 @@
 #include <linux/fs.h>
 #include "squashfs_fs_sb.h"
 #include "squashfs_fs_i.h"
+#include <linux/sched.h>
 #include <linux/buffer_head.h>
 #include <linux/vfs.h>
 #include <linux/vmalloc.h>
